"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9320],{9320:(R,m,r)=>{r.r(m),r.d(m,{EncaissementPageModule:()=>y});var u=r(177),v=r(4341),s=r(4742),g=r(8986),d=r(467),h=r(4319),e=r(3953),f=r(1889);function p(i,a){if(1&i&&(e.j41(0,"ion-grid")(1,"ion-row")(2,"ion-col",9),e.nrm(3,"img",10),e.j41(4,"ion-text",0),e.EFF(5,"Aucune donn\xe9e disponible"),e.k0s()()()()),2&i){const c=e.XpG();e.R7$(4),e.Y8G("color",c.color.sec)}}function E(i,a){if(1&i&&(e.j41(0,"ion-card")(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14),e.nrm(5,"ion-img",15),e.k0s(),e.j41(6,"div",16)(7,"div",17)(8,"div",18)(9,"small"),e.EFF(10),e.k0s()(),e.j41(11,"div",19)(12,"small"),e.EFF(13,"Montant \xe0 collecter "),e.j41(14,"b"),e.EFF(15),e.nI1(16,"number"),e.k0s()()(),e.j41(17,"div",19)(18,"small"),e.EFF(19,"Montant collect\xe9 "),e.j41(20,"b"),e.EFF(21),e.nI1(22,"number"),e.k0s()()(),e.j41(23,"div",19)(24,"small"),e.EFF(25),e.k0s()(),e.j41(26,"div",19)(27,"small"),e.EFF(28),e.k0s()()()()(),e.j41(29,"div",20)(30,"div",21)(31,"small"),e.EFF(32),e.nI1(33,"date"),e.k0s()(),e.j41(34,"div")(35,"small"),e.EFF(36),e.k0s()()()(),e.j41(37,"div",22)(38,"small"),e.EFF(39),e.k0s()()()()),2&i){let c,l,n;const t=a.$implicit,o=e.XpG();e.R7$(5),e.Y8G("src",null==t?null:t.brand_logo),e.R7$(5),e.SpI(" Cr\xe9er par ",t.org_full_name,""),e.R7$(5),e.SpI("",e.bMT(16,9,null==t?null:t.encaissement_montant_a_collecter)," MAD"),e.R7$(6),e.SpI("",e.bMT(22,11,null==t?null:t.encaissement_montant_collecte)," MAD"),e.R7$(4),e.SpI(" Op\xe9ration ",null==(c=o.getNameOperation(null==t?null:t.encaissement_operation))?null:c.label," "),e.R7$(3),e.SpI(" Moyen de paiement ",null==(l=o.getMoyenEncaissement(null==t?null:t.encaissement_moyen_paiement))?null:l.label,""),e.R7$(4),e.SpI("le ",e.bMT(33,13,t.encaissement_date_create),""),e.R7$(4),e.SpI("#",t.vehicle_ref,""),e.R7$(3),e.JRh(null==(n=o.getStatutEncaissement(null==t?null:t.encaissement_statut))?null:n.label)}}const b=[{path:"",component:(()=>{var i;class a{constructor(l,n){this.httpConnect=l,this.loadingController=n,this.color=h.Y.COLORS,this.page=1,this.lastLength=0,this.progress=!1,this.firstProgress=!0,this.encaissementlist=[],this.NameOperation=[{value:"dossier",label:"Dossier",color:"accent-bg"},{value:"commission",label:"Commission",color:"yellow-bg fuse-white-500-fg"},{value:"avance",label:"Avance",color:"yellow-bg fuse-white-500-fg"}],this.MoyenEnaciassement=[{value:"cheque",label:"Ch\xe8que",color:"accent-bg"},{value:"virement",label:"Virement",color:"yellow-bg fuse-white-500-fg"},{value:"espece",label:"Esp\xe9ce",color:"yellow-bg fuse-white-500-fg"}],this.StatutEnaciassement=[{value:"AENCAISSER",label:"\xc0 encaisser   ",color:"primary",bgcolor:"text-white bg-primary"},{value:"ENCAISSER",label:"Encaisser",color:"success",bgcolor:"text-white bg-success"},{value:"NONENCAISSER",label:"Non encaisser",color:"danger",bgcolor:"text-white bg-info"}],this.getEncaissement().then(t=>{var o;"success"===(null==t?void 0:t.result)&&(this.encaissementlist=null==t?void 0:t.data,this.lastLength=null==t||null===(o=t.data)||void 0===o?void 0:o.length)}).finally(()=>{this.firstProgress=!1})}ngOnInit(){console.log(this.encaissementlist)}getEncaissement(){var l=this;return(0,d.A)(function*(){const n=l.spinner("Chargement ...");return n.then(t=>{t.present()}),l.httpConnect.getData(h.Y.API_GET_BY_ID_USER,{page:l.page}).finally(()=>{setTimeout(()=>{n.then(t=>{t.dismiss()})},1e3)})})()}canGetMore(){return!(this.progress||0===this.lastLength)}loadData(l){this.canGetMore()?(this.page++,this.getEncaissement().then(n=>{var t;"success"===(null==n?void 0:n.result)&&(this.encaissementlist=[...this.encaissementlist,...null==n?void 0:n.data],this.lastLength=null==n||null===(t=n.data)||void 0===t?void 0:t.length)}).finally(()=>{l.target.complete()})):l.target.complete()}doRefresh(l){this.page=1,this.lastLength=0,this.getEncaissement().then(n=>{var t;"success"===(null==n?void 0:n.result)&&(this.encaissementlist=null==n?void 0:n.data,this.lastLength=null==n||null===(t=n.data)||void 0===t?void 0:t.length)}).finally(()=>{l&&l.target.complete()})}spinner(l){var n=this;return(0,d.A)(function*(){return yield n.loadingController.create({cssClass:"my-custom-class",message:l})})()}getNameOperation(l){return this.NameOperation.filter(n=>(null==n?void 0:n.value)===l).length>0&&null!==l?this.NameOperation.filter(n=>(null==n?void 0:n.value)===l)[0]:null}getMoyenEncaissement(l){return this.MoyenEnaciassement.filter(n=>(null==n?void 0:n.value)===l).length>0&&null!==l?this.MoyenEnaciassement.filter(n=>(null==n?void 0:n.value)===l)[0]:null}getStatutEncaissement(l){return this.StatutEnaciassement.filter(n=>(null==n?void 0:n.value)===l).length>0&&null!==l?this.StatutEnaciassement.filter(n=>(null==n?void 0:n.value)===l)[0]:null}}return(i=a).\u0275fac=function(l){return new(l||i)(e.rXU(f.s),e.rXU(s.Xi))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-encaissement"]],decls:16,vars:4,consts:[[3,"color"],["slot","start"],["icon","arrow-back-outline"],["slot","start",1,"ms-3"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","chargement en cours..."],[1,"text-center"],["src","../../../assets/empty.svg","alt","char",1,"char-empty"],[1,"row"],[1,"col-11"],[1,"row","me-0","ms-0"],[1,"col-3","text-center",2,"margin-top","23px"],[1,"ms-3","mt-3",3,"src"],[1,"col-9"],[1,"row","me-0","ms-0","mt-2"],[1,"col-12","font-weight-bold"],[1,"col-12"],[1,"d-flex","justify-content-between","mx-0"],[2,"margin-left","9px"],[1,"col-1","bg-secondary","text-white","text-center",2,"writing-mode","vertical-rl"]],template:function(l,n){1&l&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Liste des encaissements"),e.k0s()()(),e.j41(6,"ion-toolbar")(7,"ion-label",3),e.EFF(8),e.k0s()(),e.j41(9,"ion-content")(10,"ion-refresher",4),e.bIt("ionRefresh",function(o){return n.doRefresh(o)}),e.nrm(11,"ion-refresher-content"),e.k0s(),e.DNE(12,p,6,1,"ion-grid",5)(13,E,40,15,"ion-card",6),e.j41(14,"ion-infinite-scroll",7),e.bIt("ionInfinite",function(o){return n.loadData(o)}),e.nrm(15,"ion-infinite-scroll-content",8),e.k0s()()),2&l&&(e.R7$(),e.Y8G("color",n.color.primary),e.R7$(7),e.SpI(" ",n.encaissementlist.length+" encaissement"+(n.encaissementlist.length>1?"s":"")," "),e.R7$(4),e.Y8G("ngIf",0===(null==n.encaissementlist?null:n.encaissementlist.length)&&!n.firstProgress),e.R7$(),e.Y8G("ngForOf",n.encaissementlist))},dependencies:[u.Sq,u.bT,s.QW,s.b_,s.hU,s.W9,s.lO,s.eU,s.KW,s.Ax,s.Hp,s.he,s.To,s.Ki,s.ln,s.IO,s.BC,s.ai,s.el,u.QX,u.vh]}),a})()}];let F=(()=>{var i;class a{}return(i=a).\u0275fac=function(l){return new(l||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.iI.forChild(b),g.iI]}),a})(),y=(()=>{var i;class a{}return(i=a).\u0275fac=function(l){return new(l||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.MD,v.YN,s.bv,F]}),a})()}}]);