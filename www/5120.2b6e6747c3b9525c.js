(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5120],{5120:(L,m,a)=>{"use strict";a.r(m),a.d(m,{VoiceRecorderWeb:()=>A});var N=a(7464),d=a(467),w=a(9319),c=a(5051);const T=()=>new Error("FAILED_TO_RECORD"),_=()=>new Error("RECORDING_HAS_NOT_STARTED"),k=()=>new Error("FAILED_TO_FETCH_RECORDING"),G=()=>new Error("COULD_NOT_QUERY_PERMISSION_STATUS"),E=["audio/aac","audio/webm;codecs=opus","audio/mp4","audio/webm","audio/ogg;codecs=opus"],U=()=>new Promise(()=>{});class v{constructor(){this.mediaRecorder=null,this.chunks=[],this.pendingResult=U()}static canDeviceVoiceRecord(){return(0,d.A)(function*(){var i;return null==(null===(i=null==navigator?void 0:navigator.mediaDevices)||void 0===i?void 0:i.getUserMedia)||null==v.getSupportedMimeType()?{value:!1}:{value:!0}})()}startRecording(){var i=this;return(0,d.A)(function*(){if(null!=i.mediaRecorder)throw new Error("ALREADY_RECORDING");if(!(yield v.canDeviceVoiceRecord()).value)throw new Error("DEVICE_CANNOT_VOICE_RECORD");if(!(yield v.hasAudioRecordingPermission().catch(()=>({value:!0}))).value)throw new Error("MISSING_PERMISSION");return navigator.mediaDevices.getUserMedia({audio:!0}).then(i.onSuccessfullyStartedRecording.bind(i)).catch(i.onFailedToStartRecording.bind(i))})()}stopRecording(){var i=this;return(0,d.A)(function*(){if(null==i.mediaRecorder)throw _();try{return i.mediaRecorder.stop(),i.mediaRecorder.stream.getTracks().forEach(f=>f.stop()),i.pendingResult}catch{throw k()}finally{i.prepareInstanceForNextOperation()}})()}static hasAudioRecordingPermission(){return(0,d.A)(function*(){return null==navigator.permissions.query?null==navigator.mediaDevices?Promise.reject(G()):navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>({value:!0})).catch(()=>{throw G()}):navigator.permissions.query({name:"microphone"}).then(i=>({value:"granted"===i.state})).catch(()=>{throw G()})})()}static requestAudioRecordingPermission(){return(0,d.A)(function*(){return(yield v.hasAudioRecordingPermission().catch(()=>({value:!1}))).value?{value:!0}:navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>({value:!0})).catch(()=>({value:!1}))})()}pauseRecording(){if(null==this.mediaRecorder)throw _();return"recording"===this.mediaRecorder.state?(this.mediaRecorder.pause(),Promise.resolve({value:!0})):Promise.resolve({value:!1})}resumeRecording(){if(null==this.mediaRecorder)throw _();return"paused"===this.mediaRecorder.state?(this.mediaRecorder.resume(),Promise.resolve({value:!0})):Promise.resolve({value:!1})}getCurrentStatus(){return Promise.resolve(null==this.mediaRecorder?{status:c.k.NONE}:"recording"===this.mediaRecorder.state?{status:c.k.RECORDING}:"paused"===this.mediaRecorder.state?{status:c.k.PAUSED}:{status:c.k.NONE})}static getSupportedMimeType(){if(null==(null==MediaRecorder?void 0:MediaRecorder.isTypeSupported))return null;const i=E.find(f=>MediaRecorder.isTypeSupported(f));return null!=i?i:null}onSuccessfullyStartedRecording(i){var f=this;return this.pendingResult=new Promise((S,I)=>{this.mediaRecorder=new MediaRecorder(i),this.mediaRecorder.onerror=()=>{this.prepareInstanceForNextOperation(),I(T())},this.mediaRecorder.onstop=(0,d.A)(function*(){const O=v.getSupportedMimeType();if(null==O)return f.prepareInstanceForNextOperation(),void I(k());const M=new Blob(f.chunks,{type:O});if(M.size<=0)return f.prepareInstanceForNextOperation(),void I(new Error("EMPTY_RECORDING"));const Y=yield v.blobToBase64(M),V=yield(0,w.A)(M);f.prepareInstanceForNextOperation(),S({value:{recordDataBase64:Y,mimeType:O,msDuration:1e3*V}})}),this.mediaRecorder.ondataavailable=O=>this.chunks.push(O.data),this.mediaRecorder.start()}),{value:!0}}onFailedToStartRecording(){throw this.prepareInstanceForNextOperation(),T()}static blobToBase64(i){return new Promise(f=>{const S=new FileReader;S.onloadend=()=>{const I=String(S.result),O=I.split("base64,");f((O.length>1?O[1]:I).trim())},S.readAsDataURL(i)})}prepareInstanceForNextOperation(){if(null!=this.mediaRecorder&&"recording"===this.mediaRecorder.state)try{this.mediaRecorder.stop()}catch(i){console.warn("While trying to stop a media recorder, an error was thrown",i)}this.pendingResult=U(),this.mediaRecorder=null,this.chunks=[]}}class A extends N.E_{constructor(){super(...arguments),this.voiceRecorderInstance=new v}canDeviceVoiceRecord(){return v.canDeviceVoiceRecord()}hasAudioRecordingPermission(){return v.hasAudioRecordingPermission()}requestAudioRecordingPermission(){return v.requestAudioRecordingPermission()}startRecording(){return this.voiceRecorderInstance.startRecording()}stopRecording(){return this.voiceRecorderInstance.stopRecording()}pauseRecording(){return this.voiceRecorderInstance.pauseRecording()}resumeRecording(){return this.voiceRecorderInstance.resumeRecording()}getCurrentStatus(){return this.voiceRecorderInstance.getCurrentStatus()}}},9319:(L,m,a)=>{"use strict";var d=a(4976);m.A=function h(P){return l.apply(this,arguments)};var w=d(a(5230)),c=d(a(6891));function l(){return(l=(0,c.default)(w.default.mark(function P(p){var s,D;return w.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return s=document.createElement("video"),D=new Promise(function(C,_){s.addEventListener("loadedmetadata",function(){s.duration===1/0?(s.currentTime=Number.MAX_SAFE_INTEGER,s.ontimeupdate=function(){s.ontimeupdate=null,C(s.duration),s.currentTime=0}):C(s.duration)}),s.onerror=function(k){return _(k.target.error)}}),s.src="string"==typeof p||p instanceof String?p:window.URL.createObjectURL(p),T.abrupt("return",D);case 4:case"end":return T.stop()}},P)}))).apply(this,arguments)}},5198:L=>{var m=function(a){"use strict";var c,N=Object.prototype,d=N.hasOwnProperty,w=Object.defineProperty||function(r,e,t){r[e]=t.value},h="function"==typeof Symbol?Symbol:{},l=h.iterator||"@@iterator",P=h.asyncIterator||"@@asyncIterator",p=h.toStringTag||"@@toStringTag";function s(r,e,t){return Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{s({},"")}catch{s=function(e,t,o){return e[t]=o}}function D(r,e,t,o){var u=Object.create((e&&e.prototype instanceof U?e:U).prototype),g=new W(o||[]);return w(u,"_invoke",{value:M(r,t,g)}),u}function T(r,e,t){try{return{type:"normal",arg:r.call(e,t)}}catch(o){return{type:"throw",arg:o}}}a.wrap=D;var C="suspendedStart",_="suspendedYield",k="executing",G="completed",E={};function U(){}function v(){}function A(){}var j={};s(j,l,function(){return this});var i=Object.getPrototypeOf,f=i&&i(i(Q([])));f&&f!==N&&d.call(f,l)&&(j=f);var S=A.prototype=U.prototype=Object.create(j);function I(r){["next","throw","return"].forEach(function(e){s(r,e,function(t){return this._invoke(e,t)})})}function O(r,e){function t(u,g,R,b){var y=T(r[u],r,g);if("throw"!==y.type){var q=y.arg,B=q.value;return B&&"object"==typeof B&&d.call(B,"__await")?e.resolve(B.__await).then(function(F){t("next",F,R,b)},function(F){t("throw",F,R,b)}):e.resolve(B).then(function(F){q.value=F,R(q)},function(F){return t("throw",F,R,b)})}b(y.arg)}var o;w(this,"_invoke",{value:function n(u,g){function R(){return new e(function(b,y){t(u,g,b,y)})}return o=o?o.then(R,R):R()}})}function M(r,e,t){var o=C;return function(u,g){if(o===k)throw new Error("Generator is already running");if(o===G){if("throw"===u)throw g;return z()}for(t.method=u,t.arg=g;;){var R=t.delegate;if(R){var b=Y(R,t);if(b){if(b===E)continue;return b}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(o===C)throw o=G,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);o=k;var y=T(r,e,t);if("normal"===y.type){if(o=t.done?G:_,y.arg===E)continue;return{value:y.arg,done:t.done}}"throw"===y.type&&(o=G,t.method="throw",t.arg=y.arg)}}}function Y(r,e){var t=e.method,o=r.iterator[t];if(o===c)return e.delegate=null,"throw"===t&&r.iterator.return&&(e.method="return",e.arg=c,Y(r,e),"throw"===e.method)||"return"!==t&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+t+"' method")),E;var n=T(o,r.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,E;var u=n.arg;return u?u.done?(e[r.resultName]=u.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,E):u:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,E)}function V(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function H(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function W(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(V,this),this.reset(!0)}function Q(r){if(r){var e=r[l];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var t=-1,o=function n(){for(;++t<r.length;)if(d.call(r,t))return n.value=r[t],n.done=!1,n;return n.value=c,n.done=!0,n};return o.next=o}}return{next:z}}function z(){return{value:c,done:!0}}return v.prototype=A,w(S,"constructor",{value:A,configurable:!0}),w(A,"constructor",{value:v,configurable:!0}),v.displayName=s(A,p,"GeneratorFunction"),a.isGeneratorFunction=function(r){var e="function"==typeof r&&r.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,A):(r.__proto__=A,s(r,p,"GeneratorFunction")),r.prototype=Object.create(S),r},a.awrap=function(r){return{__await:r}},I(O.prototype),s(O.prototype,P,function(){return this}),a.AsyncIterator=O,a.async=function(r,e,t,o,n){void 0===n&&(n=Promise);var u=new O(D(r,e,t,o),n);return a.isGeneratorFunction(e)?u:u.next().then(function(g){return g.done?g.value:u.next()})},I(S),s(S,p,"Generator"),s(S,l,function(){return this}),s(S,"toString",function(){return"[object Generator]"}),a.keys=function(r){var e=Object(r),t=[];for(var o in e)t.push(o);return t.reverse(),function n(){for(;t.length;){var u=t.pop();if(u in e)return n.value=u,n.done=!1,n}return n.done=!0,n}},a.values=Q,W.prototype={constructor:W,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(H),!r)for(var e in this)"t"===e.charAt(0)&&d.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function t(b,y){return u.type="throw",u.arg=r,e.next=b,y&&(e.method="next",e.arg=c),!!y}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],u=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var g=d.call(n,"catchLoc"),R=d.call(n,"finallyLoc");if(g&&R){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(g){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!R)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(r,e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&d.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===r||"continue"===r)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var u=n?n.completion:{};return u.type=r,u.arg=e,n?(this.method="next",this.next=n.finallyLoc,E):this.complete(u)},complete:function(r,e){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&e&&(this.next=e),E},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===r)return this.complete(t.completion,t.afterLoc),H(t),E}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===r){var o=t.completion;if("throw"===o.type){var n=o.arg;H(t)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,t){return this.delegate={iterator:Q(r),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=c),E}},a}(L.exports);try{regeneratorRuntime=m}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=m:Function("r","regeneratorRuntime = r")(m)}},6891:L=>{function m(N,d,w,c,h,l,P){try{var p=N[l](P),s=p.value}catch(D){return void w(D)}p.done?d(s):Promise.resolve(s).then(c,h)}L.exports=function a(N){return function(){var d=this,w=arguments;return new Promise(function(c,h){var l=N.apply(d,w);function P(s){m(l,c,h,P,p,"next",s)}function p(s){m(l,c,h,P,p,"throw",s)}P(void 0)})}}},4976:L=>{L.exports=function m(a){return a&&a.__esModule?a:{default:a}}},5230:(L,m,a)=>{L.exports=a(5198)}}]);