"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1533],{1533:(y,d,r)=>{r.r(d),r.d(d,{NotificationPageModule:()=>M});var g=r(177),p=r(4341),o=r(4742),m=r(8986),N=r(467),h=(r(4059),r(7586)),u=r(4319),t=r(3953),I=r(1889);function v(n,l){1&n&&(t.j41(0,"ion-list-header")(1,"ion-label"),t.EFF(2,"Notifications"),t.k0s()())}function P(n,l){if(1&n){const s=t.RV6();t.j41(0,"ion-item")(1,"ion-avatar",5)(2,"img",6),t.bIt("error",function(e){t.eBV(s);const a=t.XpG();return t.Njj(a.getDefaultImage(e))}),t.k0s()(),t.j41(3,"ion-label")(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"h3")(7,"b"),t.EFF(8),t.k0s(),t.EFF(9),t.k0s(),t.j41(10,"p"),t.EFF(11),t.k0s()()()}if(2&n){const s=l.$implicit,i=t.XpG();t.R7$(2),t.Y8G("src",i.endpImages+s.image,t.B4B),t.R7$(3),t.JRh(s.title),t.R7$(3),t.JRh(s.name),t.R7$(),t.SpI(" ",s.message,""),t.R7$(2),t.JRh(s.duration)}}function R(n,l){if(1&n&&(t.j41(0,"ion-grid")(1,"ion-row")(2,"ion-col",7),t.nrm(3,"img",8),t.j41(4,"ion-text",9),t.EFF(5,"Aucune donn\xe9e disponible"),t.k0s()()()()),2&n){const s=t.XpG();t.R7$(4),t.Y8G("color",s.color.sec)}}const f=h||h;f.locale("fr");const F=[{path:"",component:(()=>{var n;class l{constructor(i,e){this.httpConnect=i,this.loadingController=e,this.endpImages=u.Y.GET_IMAGES,this.notifications=Array(),this.lastId=null,this.progress=!1,this.lastCount=null,this.color=u.Y.COLORS,this.getNotifications(this.lastId)}doRefresh(i){this.lastId=null,this.lastCount=null,this.notifications=Array(),this.getNotifications(this.lastId).finally(()=>{i&&i.target.complete()})}canGetMore(){return!(this.progress||0===this.lastCount)}getMoreNotification(i){this.canGetMore()?this.getNotifications(this.lastId).finally(()=>{i.target.complete()}):i.target.complete()}getNotification(){return this.notifications.forEach(i=>{const e=f.duration((0,h.utc)(f()).diff(f(i.date,"YYYY-MM-DD hh:mm:ss"))).humanize();i.duration="il ya "+e}),this.notifications}spinner(i){var e=this;return(0,N.A)(function*(){return yield e.loadingController.create({cssClass:"my-custom-class",message:i})})()}getNotifications(i){const e=this.spinner("Chargement ...");return e.then(a=>{a.present()}),this.progress=!0,this.httpConnect.getData(u.Y.API_GET_NOTIF,{notification_id:i}).then(a=>{var c;this.lastCount=null==a||null===(c=a.data)||void 0===c?void 0:c.length,this.notifications=[...this.notifications,...null==a?void 0:a.data],this.notifications.length>0&&(this.lastId=this.notifications[this.notifications.length-1].id)}).finally(()=>{this.progress=!1,setTimeout(()=>{e.then(a=>{a.dismiss()})},1e3)})}getDefaultImage(i){i.target.src="../../assets/homme.jpg"}}return(n=l).\u0275fac=function(i){return new(i||n)(t.rXU(I.s),t.rXU(o.Xi))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-notification"]],decls:13,vars:3,consts:[["slot","fixed",3,"ionRefresh"],[4,"ngIf"],[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],["slot","start"],["alt","photo",3,"error","src"],[1,"text-center"],["src","../../assets/notification.svg","alt","char",1,"char-empty"],[3,"color"]],template:function(i,e){if(1&i&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"notification"),t.k0s()()(),t.j41(4,"ion-content")(5,"ion-refresher",0),t.bIt("ionRefresh",function(c){return e.doRefresh(c)}),t.nrm(6,"ion-refresher-content"),t.k0s(),t.DNE(7,v,3,0,"ion-list-header",1),t.j41(8,"ion-list"),t.DNE(9,P,12,5,"ion-item",2),t.k0s(),t.DNE(10,R,6,1,"ion-grid",1),t.j41(11,"ion-infinite-scroll",3),t.bIt("ionInfinite",function(c){return e.getMoreNotification(c)}),t.nrm(12,"ion-infinite-scroll-content",4),t.k0s()()),2&i){let a,c;t.R7$(7),t.Y8G("ngIf",(null==(a=e.getNotification())?null:a.length)>0),t.R7$(2),t.Y8G("ngForOf",e.getNotification()),t.R7$(),t.Y8G("ngIf",0===(null==(c=e.getNotification())?null:c.length))}},dependencies:[g.Sq,g.bT,o.mC,o.hU,o.W9,o.lO,o.eU,o.Ax,o.Hp,o.uz,o.he,o.nf,o.AF,o.To,o.Ki,o.ln,o.IO,o.BC,o.ai],styles:["ion-content[_ngcontent-%COMP%]{--background: #f4f5f8}"]}),l})()}];let C=(()=>{var n;class l{}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[m.iI.forChild(F),m.iI]}),l})(),M=(()=>{var n;class l{}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[g.MD,p.YN,o.bv,C]}),l})()}}]);