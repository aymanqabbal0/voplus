"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8972],{8972:(j,v,c)=>{c.r(v),c.d(v,{ListVersementPageModule:()=>R});var m=c(177),f=c(4341),s=c(4742),d=c(8986),h=c(467),g=c(4319),e=c(3953),p=c(1889);const _=()=>["/add-versement"];function V(i,a){if(1&i&&(e.j41(0,"ion-grid")(1,"ion-row")(2,"ion-col",13),e.nrm(3,"img",14),e.j41(4,"ion-text",0),e.EFF(5,"Aucune donn\xe9e disponible"),e.k0s()()()()),2&i){const r=e.XpG();e.R7$(4),e.Y8G("color",r.color.sec)}}function L(i,a){1&i&&(e.j41(0,"div",28)(1,"small"),e.EFF(2,"Valider"),e.k0s()())}function F(i,a){1&i&&(e.j41(0,"div",29)(1,"small"),e.EFF(2,"Non Valider"),e.k0s()())}function I(i,a){1&i&&(e.j41(0,"div",30)(1,"small"),e.EFF(2,"En cours"),e.k0s()())}function b(i,a){if(1&i){const r=e.RV6();e.j41(0,"ion-card")(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"a",19)(6,"ion-img",20),e.bIt("error",function(t){e.eBV(r);const o=e.XpG();return e.Njj(o.onError(t))}),e.k0s()()(),e.j41(7,"div",21),e.bIt("click",function(){const t=e.eBV(r).$implicit,o=e.XpG();return e.Njj(null===t.versement_validation&&o.openFormUpdate(t))}),e.j41(8,"div",22)(9,"div",23)(10,"small"),e.EFF(11),e.k0s()(),e.j41(12,"div",24)(13,"small"),e.EFF(14,"Montant envoyer "),e.j41(15,"b"),e.EFF(16),e.nI1(17,"number"),e.k0s()()(),e.j41(18,"div",24)(19,"small"),e.EFF(20),e.nI1(21,"date"),e.k0s()()()()()(),e.DNE(22,L,3,0,"div",25)(23,F,3,0,"div",26)(24,I,3,0,"div",27),e.k0s()()}if(2&i){const r=a.$implicit,n=e.XpG();e.R7$(5),e.Y8G("href",n.getSrc(r.versement_img),e.B4B),e.R7$(),e.Y8G("src",n.getSrc(r.versement_img)),e.R7$(5),e.Lme(" Cr\xe9er par ",r.user_f_name," ",r.user_l_name,""),e.R7$(5),e.SpI("",e.bMT(17,9,null==r?null:r.versement_montant_envoyer)," MAD"),e.R7$(4),e.SpI("le ",e.bMT(21,11,r.versement_date),""),e.R7$(2),e.Y8G("ngIf",1==r.versement_validation),e.R7$(),e.Y8G("ngIf",0==r.versement_validation),e.R7$(),e.Y8G("ngIf",null==r.versement_validation)}}const P=[{path:"",component:(()=>{var i;class a{constructor(n,t,o){this.httpConnect=n,this.loadingController=t,this.router=o,this.color=g.Y.COLORS,this.page=1,this.lastLength=0,this.progress=!1,this.listversement=[],this.firstProgress=!0,this.sumVersed=0,this.getVersement().then(l=>{var u;"success"===(null==l?void 0:l.result)&&(this.sumVersed=null==l?void 0:l.sumVersed,this.listversement=null==l?void 0:l.data,this.lastLength=null==l||null===(u=l.data)||void 0===u?void 0:u.length)}).finally(()=>{this.firstProgress=!1})}ngOnInit(){console.log(this.listversement)}getSrc(n){return g.Y.GET_IMAGES+n}onError(n){n.target.src=g.Y.DEFAULT_IMG_UPLOAD}getVersement(){var n=this;return(0,h.A)(function*(){const t=n.spinner("Chargement ...");return t.then(o=>{o.present()}),n.httpConnect.getData(g.Y.API_GET_VERSEMENT_BY_ID_USER,{page:n.page}).finally(()=>{setTimeout(()=>{t.then(o=>{o.dismiss()})},1e3)})})()}canGetMore(){return!(this.progress||0===this.lastLength)}loadData(n){this.canGetMore()?(this.page++,this.getVersement().then(t=>{var o;"success"===(null==t?void 0:t.result)&&(this.listversement=[...this.listversement,...null==t?void 0:t.data],this.lastLength=null==t||null===(o=t.data)||void 0===o?void 0:o.length)}).finally(()=>{n.target.complete()})):n.target.complete()}doRefresh(n){this.page=1,this.lastLength=0,this.getVersement().then(t=>{var o;"success"===(null==t?void 0:t.result)&&(this.listversement=null==t?void 0:t.data,this.lastLength=null==t||null===(o=t.data)||void 0===o?void 0:o.length)}).finally(()=>{n&&n.target.complete()})}spinner(n){var t=this;return(0,h.A)(function*(){return yield t.loadingController.create({cssClass:"my-custom-class",message:n})})()}openFormUpdate(n){this.router.navigate(["/versement/"+n.versement_id])}}return(i=a).\u0275fac=function(n){return new(n||i)(e.rXU(p.s),e.rXU(s.Xi),e.rXU(d.Ix))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-list-versement"]],decls:26,vars:9,consts:[[3,"color"],["slot","start"],["icon","arrow-back-outline"],["slot","start",1,"ms-3"],["slot","secondary"],[3,"routerLink"],["name","add-circle-outline",1,"me-2"],[1,"d-flex","w-100","justify-content-between","px-2"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","chargement en cours..."],[1,"text-center"],["src","../../../assets/empty.svg","alt","char",1,"char-empty"],[1,"row"],[1,"col-11"],[1,"row","me-0","ms-0"],[1,"col-3",2,"margin-top","10px","margin-bottom","10px"],["target","_blank",3,"href"],[2,"width","73px",3,"error","src"],[1,"col-9",3,"click"],[1,"row","me-0","ms-0","mt-2"],[1,"col-12","font-weight-bold"],[1,"col-12"],["class","col-1 bg-success text-white text-center","style","writing-mode: vertical-rl;",4,"ngIf"],["class","col-1 bg-danger text-white text-center","style","writing-mode: vertical-rl;",4,"ngIf"],["class","col-1 bg-warning text-white text-center","style","writing-mode: vertical-rl;",4,"ngIf"],[1,"col-1","bg-success","text-white","text-center",2,"writing-mode","vertical-rl"],[1,"col-1","bg-danger","text-white","text-center",2,"writing-mode","vertical-rl"],[1,"col-1","bg-warning","text-white","text-center",2,"writing-mode","vertical-rl"]],template:function(n,t){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Liste des versements"),e.k0s()()(),e.j41(6,"ion-toolbar")(7,"ion-label",3),e.EFF(8),e.k0s(),e.j41(9,"ion-buttons",4)(10,"ion-button",5),e.nrm(11,"ion-icon",6),e.EFF(12," Ajouter versement "),e.k0s()()(),e.j41(13,"div",7)(14,"span"),e.EFF(15," Total versements "),e.k0s(),e.j41(16,"span"),e.EFF(17),e.nI1(18,"number"),e.k0s()(),e.j41(19,"ion-content")(20,"ion-refresher",8),e.bIt("ionRefresh",function(l){return t.doRefresh(l)}),e.nrm(21,"ion-refresher-content"),e.k0s(),e.DNE(22,V,6,1,"ion-grid",9)(23,b,25,13,"ion-card",10),e.j41(24,"ion-infinite-scroll",11),e.bIt("ionInfinite",function(l){return t.loadData(l)}),e.nrm(25,"ion-infinite-scroll-content",12),e.k0s()()),2&n&&(e.R7$(),e.Y8G("color",t.color.primary),e.R7$(7),e.SpI(" ",t.listversement.length+" versement"+(t.listversement.length>1?"s":"")," "),e.R7$(2),e.Y8G("routerLink",e.lJ4(8,_)),e.R7$(7),e.SpI(" ",e.bMT(18,6,t.sumVersed)," Dhs "),e.R7$(5),e.Y8G("ngIf",0===(null==t.listversement?null:t.listversement.length)&&!t.firstProgress),e.R7$(),e.Y8G("ngForOf",t.listversement))},dependencies:[m.Sq,m.bT,s.Jm,s.QW,s.b_,s.hU,s.W9,s.lO,s.eU,s.iq,s.KW,s.Ax,s.Hp,s.he,s.To,s.Ki,s.ln,s.IO,s.BC,s.ai,s.el,s.N7,d.Wk,m.QX,m.vh]}),a})()}];let E=(()=>{var i;class a{}return(i=a).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[d.iI.forChild(P),d.iI]}),a})(),R=(()=>{var i;class a{}return(i=a).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[m.MD,f.YN,s.bv,E]}),a})()}}]);