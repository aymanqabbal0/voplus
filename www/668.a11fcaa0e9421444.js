"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[668],{668:(V,O,s)=>{s.r(O),s.d(O,{ProfilePageModule:()=>U});var E=s(177),l=s(4341),t=s(4742),R=s(8986),G=s(467),c=s(4319),e=s(3953),T=s(1889);let D=(()=>{var i;class r{constructor(o){this.httpTrans=o}getProfile(){return this.httpTrans.getData(c.Y.API_GET_PROFILE,{})}updateProfile(o){return this.httpTrans.putData(c.Y.API_UPDATE_PROFILE,o)}}return(i=r).\u0275fac=function(o){return new(o||i)(e.KVO(T.s))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),r})();var I=s(3426);function J(i,r){if(1&i&&(e.j41(0,"ion-chip")(1,"ion-label"),e.EFF(2),e.k0s()()),2&i){const a=r.$implicit;e.R7$(2),e.JRh(null==a?null:a.site_name)}}const N=[{path:"",component:(()=>{var i;class r{constructor(o,n,f,d){this.myProfileS=o,this.fb=n,this.loadingController=f,this.gs=d,this.color=c.Y.COLORS,this.form=new l.gE({user_login:new l.MJ(null,l.k0.required),user_f_name:new l.MJ(null,l.k0.required),user_l_name:new l.MJ(null,l.k0.required),user_email:new l.MJ(null,l.k0.required),user_phone:new l.MJ(null,l.k0.required),user_gender:new l.MJ(null,l.k0.required)}),this.user_login="",this.user_l_name="",this.user_f_name="",this.user_email="",this.user_phone="",this.user_gender="",this.cities=[],this.sites=[],this.isLoading=!1}ngOnInit(){this.getDataProfile()}getDataProfile(){var o=this;return(0,G.A)(function*(){o.isLoading=!0,yield o.presentLoading("Obtention de donn\xe9es ..."),o.myProfileS.getProfile().then(n=>{if("success"===n.result){var f,d,g,P,v,h,p,y,M,F,k,b,C;null===(f=o.form.get("user_login"))||void 0===f||f.setValue(null==n||null===(d=n.data[0])||void 0===d?void 0:d.user_login),null===(g=o.form.get("user_l_name"))||void 0===g||g.setValue(null==n||null===(P=n.data[0])||void 0===P?void 0:P.user_l_name),null===(v=o.form.get("user_f_name"))||void 0===v||v.setValue(null==n||null===(h=n.data[0])||void 0===h?void 0:h.user_f_name),null===(p=o.form.get("user_email"))||void 0===p||p.setValue(null==n||null===(y=n.data[0])||void 0===y?void 0:y.user_email),null===(M=o.form.get("user_phone"))||void 0===M||M.setValue(null==n||null===(F=n.data[0])||void 0===F?void 0:F.user_phone),null===(k=o.form.get("user_gender"))||void 0===k||k.setValue(null==n||null===(b=n.data[0])||void 0===b?void 0:b.user_gender),o.cities=null===(C=n.data[0])||void 0===C?void 0:C.cities_sites;let m=Object.keys(o.cities),S=[],L=[];for(let u=0;u<m.length;u++)S.push({name:m[u]});for(let u=0;u<m.length;u++)for(let j=0;j<n.data[0].cities_sites[m[u]].length;j++)L.push(n.data[0].cities_sites[m[u]][j]);o.cities=S,o.sites=L}}).finally(()=>{o.isLoading=!1,o.dismissLoading()})})()}updateProfileEvent(){this.myProfileS.updateProfile(this.form.value).then(o=>{this.gs.toastMessage(null==o?void 0:o.message)})}presentLoading(o){var n=this;return(0,G.A)(function*(){n.loading=yield n.loadingController.create({cssClass:"my-custom-class",message:o}),yield n.loading.present()})()}dismissLoading(){this.loading.dismiss()}}return(i=r).\u0275fac=function(o){return new(o||i)(e.rXU(D),e.rXU(l.ok),e.rXU(t.Xi),e.rXU(I.O))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-profile"]],decls:39,vars:5,consts:[[3,"color"],["slot","start"],["icon","arrow-back-outline"],[1,"text-center"],["src","../../assets/profile.svg","alt","char",1,"char-profile"],[1,"px-2",3,"ngSubmit","formGroup"],["position","floating"],["formControlName","user_login"],["formControlName","user_f_name"],["formControlName","user_l_name"],["readonly","","formControlName","user_gender"],["formControlName","user_email"],["formControlName","user_phone"],[4,"ngFor","ngForOf"],["expand","block","slot","end","type","submit",3,"color","disabled"]],template:function(o,n){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Mon profile"),e.k0s()()(),e.j41(6,"ion-content")(7,"ion-grid")(8,"ion-row")(9,"ion-col",3),e.nrm(10,"img",4),e.k0s()()(),e.j41(11,"form",5),e.bIt("ngSubmit",function(){return n.updateProfileEvent()}),e.j41(12,"ion-item")(13,"ion-label",6),e.EFF(14,"Login"),e.k0s(),e.nrm(15,"ion-input",7),e.k0s(),e.j41(16,"ion-item")(17,"ion-label",6),e.EFF(18,"Prenom"),e.k0s(),e.nrm(19,"ion-input",8),e.k0s(),e.j41(20,"ion-item")(21,"ion-label",6),e.EFF(22,"Nom"),e.k0s(),e.nrm(23,"ion-input",9),e.k0s(),e.j41(24,"ion-item")(25,"ion-label",6),e.EFF(26,"Gender"),e.k0s(),e.nrm(27,"ion-input",10),e.k0s(),e.j41(28,"ion-item")(29,"ion-label",6),e.EFF(30,"Email"),e.k0s(),e.nrm(31,"ion-input",11),e.k0s(),e.j41(32,"ion-item")(33,"ion-label",6),e.EFF(34,"Telephone"),e.k0s(),e.nrm(35,"ion-input",12),e.k0s(),e.DNE(36,J,3,1,"ion-chip",13),e.j41(37,"ion-button",14),e.EFF(38,"Modifier "),e.k0s()()()),2&o&&(e.R7$(),e.Y8G("color",n.color.primary),e.R7$(10),e.Y8G("formGroup",n.form),e.R7$(25),e.Y8G("ngForOf",n.sites),e.R7$(),e.Y8G("color",null==n.color?null:n.color.primary)("disabled",!n.form.valid))},dependencies:[E.Sq,l.qT,l.BC,l.cb,t.Jm,t.QW,t.ZB,t.hU,t.W9,t.lO,t.eU,t.$w,t.uz,t.he,t.ln,t.BC,t.ai,t.Gw,t.el,l.j4,l.JD],styles:["ion-icon[_ngcontent-%COMP%]{font-size:30px;margin-right:10px;cursor:pointer}.footer[_ngcontent-%COMP%]{margin-top:20px;margin-left:10px}.my-custom-class[_ngcontent-%COMP%]{--background: #222;--spinner-color: #fff;color:#fff}ion-badge[_ngcontent-%COMP%]{margin-left:5px}.char-profile[_ngcontent-%COMP%]{width:256px}"]}),r})()}];let w=(()=>{var i;class r{}return(i=r).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[R.iI.forChild(N),R.iI]}),r})(),U=(()=>{var i;class r{}return(i=r).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[E.MD,l.YN,t.bv,w,l.X1]}),r})()}}]);